{"version":3,"file":"reactNativeSdk.cjs.js","mappings":"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","sources":["webpack://@web3auth/react-native-sdk/external commonjs2 \"@babel/runtime/helpers/asyncToGenerator\"","webpack://@web3auth/react-native-sdk/external commonjs2 \"@babel/runtime/helpers/classCallCheck\"","webpack://@web3auth/react-native-sdk/external commonjs2 \"@babel/runtime/helpers/createClass\"","webpack://@web3auth/react-native-sdk/external commonjs2 \"@babel/runtime/helpers/defineProperty\"","webpack://@web3auth/react-native-sdk/external commonjs2 \"@babel/runtime/regenerator\"","webpack://@web3auth/react-native-sdk/external commonjs2 \"base64url\"","webpack://@web3auth/react-native-sdk/external commonjs2 \"loglevel\"","webpack://@web3auth/react-native-sdk/external commonjs2 \"react-native-url-polyfill\"","webpack://@web3auth/react-native-sdk/external commonjs2 \"@toruslabs/metadata-helpers\"","webpack://@web3auth/react-native-sdk/external commonjs \"@toruslabs/eccrypto\"","webpack://@web3auth/react-native-sdk/./src/api/Web3AuthApi.ts","webpack://@web3auth/react-native-sdk/./src/session/KeyStore.ts","webpack://@web3auth/react-native-sdk/./src/Web3Auth.ts","webpack://@web3auth/react-native-sdk/./src/types/sdk.ts","webpack://@web3auth/react-native-sdk/webpack/bootstrap","webpack://@web3auth/react-native-sdk/webpack/runtime/compat get default export","webpack://@web3auth/react-native-sdk/webpack/runtime/define property getters","webpack://@web3auth/react-native-sdk/webpack/runtime/hasOwnProperty shorthand","webpack://@web3auth/react-native-sdk/webpack/runtime/make namespace object","webpack://@web3auth/react-native-sdk/./src/index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/asyncToGenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/classCallCheck\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/createClass\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/defineProperty\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/regenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"base64url\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"loglevel\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"react-native-url-polyfill\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/metadata-helpers\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/eccrypto\");","import { LogoutApiRequest, StoreApiResponse } from \"./model\";\n\nexport abstract class Web3AuthApi {\n    static baseUrl = \"https://broadcast-server.tor.us\";\n\n    static async authorizeSession(key: String): Promise<StoreApiResponse> {\n        const response = await fetch(`${this.baseUrl}/store/get?key=` + key, {\n            method: 'GET'\n        });\n\n        return await response.json();\n    }\n\n    static async logout(logoutApiRequest: LogoutApiRequest): Promise<any> {\n        const response = await fetch(`${this.baseUrl}/store/set`, {\n            method: 'POST',\n            body: JSON.stringify({\n                logoutApiRequest\n            })\n        });\n\n        return await response.json();\n    }\n}","import { EncryptedStorage } from \"../types/IEncryptedStorage\";\nimport { SecureStore } from \"../types/IExpoSecureStore\";\n\nexport default class KeyStore {\n    storage: SecureStore|EncryptedStorage;\n\n    constructor(storage: SecureStore|EncryptedStorage) {\n        this.storage = storage;\n    }\n\n    async get(key: string) {\n        if ('getItemAsync' in this.storage) {\n            return (this.storage as SecureStore).getItemAsync(key, {});\n        } else {\n            return (this.storage as EncryptedStorage).getItem(key);\n        }\n    }\n\n    async set(key: string, value: string) {\n        if ('setItemAsync' in this.storage) {\n            return (this.storage as SecureStore).setItemAsync(key, value, {});\n        } else {\n            return (this.storage as EncryptedStorage).setItem(key, value);\n        }\n    }\n\n    async remove(key: string) {\n        if ('deleteItemAsync' in this.storage) {\n            return (this.storage as SecureStore).deleteItemAsync(key, {});\n        } else {\n            return (this.storage as EncryptedStorage).removeItem(key);\n        }\n    }\n}","(process as any).browser = true;\n\nimport base64url from \"base64url\";\nimport log from \"loglevel\";\nimport { URL } from \"react-native-url-polyfill\";\nimport EventEmitter from 'events';\nimport {encryptData, decryptData, keccak256 } from '@toruslabs/metadata-helpers';\nimport { getPublic, sign } from \"@toruslabs/eccrypto\";\nimport { IWebBrowser } from \"./types/IWebBrowser\";\nimport { SdkInitParams, SdkLoginParams, SdkLogoutParams } from \"./types/sdk\";\nimport { State } from \"./types/State\";\nimport { Web3AuthApi } from \"./api/Web3AuthApi\";\nimport { ShareMetadata } from \"./api/model\";\nimport { SecureStore } from \"./types/IExpoSecureStore\";\nimport { EncryptedStorage } from \"./types/IEncryptedStorage\";\nimport KeyStore from \"./session/KeyStore\";\n\nclass Web3Auth {\n  initParams: SdkInitParams;\n  webBrowser: IWebBrowser;\n  keyStore: KeyStore;\n\n  constructor(webBrowser: IWebBrowser, storage: SecureStore|EncryptedStorage, initParams: SdkInitParams) {\n    this.initParams = initParams;\n    if (!this.initParams.sdkUrl) {\n      this.initParams.sdkUrl = \"https://sdk.openlogin.com\";\n    }\n    this.webBrowser = webBrowser;\n    this.keyStore = new KeyStore(storage);\n  }\n\n  async init(): Promise<State> {\n    return this.authorizeSession();\n  }\n\n  async login(options: SdkLoginParams): Promise<State> {\n    //check for share\n    if (this.initParams.loginConfig) {\n      var loginConfigItem = Object.values(this.initParams.loginConfig)[0];\n      if (loginConfigItem) {\n        var share = await this.keyStore.get(loginConfigItem.verifier);\n        if (share) {\n            options.dappShare = share\n        }\n      }\n    }\n\n    const result = await this.request(\"login\", options.redirectUrl, options);\n    if (result.type !== \"success\" || !result.url) {\n      log.error(`[Web3Auth] login flow failed with error type ${result.type}`);\n      throw new Error(`login flow failed with error type ${result.type}`);\n    }\n\n    const fragment = new URL(result.url).hash;\n    const decodedPayload = base64url.decode(fragment);\n    const state = JSON.parse(decodedPayload) as State;\n\n    await this.keyStore.set(\"sessionId\", state?.sessionId);\n\n    if (state.userInfo?.dappShare.length > 0) {\n        this.keyStore.set(\n          state.userInfo?.verifier,\n          state.userInfo?.dappShare,\n        )\n    }\n\n    return state;\n  }\n\n  async logout(options: SdkLogoutParams): Promise<void> {\n    this.sessionTimeout();\n    const result = await this.request(\"logout\", options.redirectUrl, options);\n    if (result.type !== \"success\" || !result.url) {\n      log.error(`[Web3Auth] logout flow failed with error type ${result.type}`);\n      throw new Error(`logout flow failed with error type ${result.type}`);\n    }\n  }\n\n  private async request(path: string, redirectUrl: string, params: Record<string, unknown> = {}) {\n    const initParams = {\n      ...this.initParams,\n      clientId: this.initParams.clientId,\n      network: this.initParams.network,\n      ...(!!this.initParams.redirectUrl && {\n        redirectUrl: this.initParams.redirectUrl,\n      }),\n    };\n\n    const mergedParams = {\n      init: initParams,\n      params: {\n        ...params,\n        ...(!params.redirectUrl && { redirectUrl }),\n      },\n    };\n\n    log.debug(`[Web3Auth] params passed to Web3Auth: ${mergedParams}`);\n\n    const hash = base64url.encode(JSON.stringify(mergedParams));\n\n    const url = new URL(this.initParams.sdkUrl);\n    url.pathname = `${url.pathname}${path}`;\n    url.hash = hash;\n\n    log.info(`[Web3Auth] opening login screen in browser at ${url.href}, will redirect to ${redirectUrl}`);\n\n    return this.webBrowser.openAuthSessionAsync(url.href, redirectUrl);\n  }\n\n  async authorizeSession(): Promise<State> {\n     const sessionId = await this.keyStore.get(\"sessionId\");\n     if (sessionId && sessionId.length > 0) {\n      var pubKey = getPublic(Buffer.from(sessionId, \"hex\")).toString(\"hex\");\n      var response = await Web3AuthApi.authorizeSession(pubKey);\n      \n      var web3AuthResponse = await decryptData<any>(sessionId, response.message);\n      web3AuthResponse[\"userInfo\"] = web3AuthResponse[\"store\"]\n      delete web3AuthResponse['store'];\n\n      if (!web3AuthResponse.error) {\n        web3AuthResponse = web3AuthResponse as State;\n        if (web3AuthResponse.privKey && web3AuthResponse.privKey.trim('0').length > 0) {\n          return Promise.resolve(web3AuthResponse);\n        }\n      } else {\n        throw new Error(`session recovery failed with error ${web3AuthResponse.error}`);\n      }\n    }\n  }\n\n  async sessionTimeout() {\n    const sessionId = await this.keyStore.get(\"sessionId\");\n    if (sessionId && sessionId.length > 0) {\n      var pubKey = getPublic(Buffer.from(sessionId, \"hex\")).toString(\"hex\");\n      var response = await Web3AuthApi.authorizeSession(pubKey);\n      if (!response.success) {\n        return;\n      }\n      var shareMetadata = JSON.parse(response.message) as ShareMetadata;\n      var encryptedData = await encryptData(sessionId, \"\");\n      var encryptedMetadata: ShareMetadata = {\n          ... shareMetadata,\n          ciphertext: encryptedData\n      };\n      var jsonData = JSON.stringify(encryptedMetadata);\n      var hashData = keccak256(jsonData);\n      try {\n        await Web3AuthApi.logout({\n          key: getPublic(Buffer.from(sessionId, \"hex\")).toString(\"hex\"),\n          data: jsonData,\n          signature: (await sign(Buffer.from(sessionId, \"hex\"), hashData)).toString(\"hex\"),\n          timeout: 1\n        });\n\n        this.keyStore.remove(\"sessionId\");\n\n        if (this.initParams.loginConfig) {\n          var loginConfigItem = Object.values(this.initParams.loginConfig)[0];\n          if (loginConfigItem) {\n            this.keyStore.remove(loginConfigItem.verifier);\n          }\n        }\n      } catch (ex) {\n        log.error(ex);\n      }\n    }\n  }\n}\n\nexport default Web3Auth;\n","import type { BaseLogoutParams, BaseRedirectParams, LoginParams, OpenLoginOptions } from \"@toruslabs/openlogin\";\n\ntype SdkSpecificInitParams = {\n  sdkUrl?: string;\n};\n\nexport type SdkInitParams = Omit<\n  OpenLoginOptions & SdkSpecificInitParams,\n  \"no3PC\" | \"uxMode\" | \"replaceUrlOnRedirect\" | \"originData\" | \"_iframeUrl\" | \"_startUrl\" | \"_popupUrl\" | \"_storageServerUrl\"\n>;\n\nexport type SdkLoginParams = Omit<LoginParams, \"fastLogin\" | \"skipTKey\" | \"getWalletKey\"> & Required<Pick<LoginParams, \"loginProvider\">>;\n\nexport type SdkLogoutParams = Partial<BaseLogoutParams> & Partial<BaseRedirectParams>;\n\nexport const OPENLOGIN_NETWORK = {\n  MAINNET: \"mainnet\",\n  TESTNET: \"testnet\",\n  CYAN: \"cyan\",\n  AQUA: \"aqua\",\n  CELESTE: \"celeste\",\n} as const;\n\nexport const SUPPORTED_KEY_CURVES = {\n  SECP256K1: \"secp256k1\",\n  ED25519: \"ed25519\",\n};\n\nexport const LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  TWITCH: \"twitch\",\n  APPLE: \"apple\",\n  LINE: \"line\",\n  GITHUB: \"github\",\n  KAKAO: \"kakao\",\n  LINKEDIN: \"linkedin\",\n  TWITTER: \"twitter\",\n  WEIBO: \"weibo\",\n  WECHAT: \"wechat\",\n  EMAIL_PASSWORDLESS: \"email_passwordless\",\n  SMS_PASSWORDLESS: \"sms_passwordless\",\n  JWT: \"jwt\",\n} as const;\n\nexport const MFA_LEVELS = {\n  DEFAULT: \"default\",\n  OPTIONAL: \"optional\",\n  MANDATORY: \"mandatory\",\n  NONE: \"none\",\n};\n\nexport type {\n  ALLOWED_INTERACTIONS_TYPE,\n  LOGIN_PROVIDER_TYPE,\n  OPENLOGIN_NETWORK_TYPE,\n  SUPPORTED_KEY_CURVES_TYPE,\n  MfaLevelType,\n  LoginParams,\n  OpenloginUserInfo,\n} from \"@toruslabs/openlogin\";\nexport type { ExtraLoginOptions } from \"@toruslabs/openlogin-utils\";\nexport type { WhiteLabelData, TypeOfLogin } from \"@toruslabs/openlogin-jrpc\";\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from \"./types/IWebBrowser\";\nexport * from \"./types/sdk\";\nexport * from \"./types/State\";\nexport { default } from \"./Web3Auth\";\n"],"names":["Web3AuthApi","key","fetch","baseUrl","method","response","json","logoutApiRequest","body","JSON","stringify","KeyStore","storage","getItemAsync","getItem","value","setItemAsync","setItem","deleteItemAsync","removeItem","process","browser","base64url","log","URL","encryptData","decryptData","keccak256","getPublic","sign","Web3Auth","webBrowser","initParams","sdkUrl","keyStore","authorizeSession","options","loginConfig","loginConfigItem","Object","values","get","verifier","share","dappShare","request","redirectUrl","result","type","url","error","Error","fragment","hash","decodedPayload","decode","state","parse","set","sessionId","userInfo","length","sessionTimeout","path","params","clientId","network","mergedParams","init","debug","encode","pathname","info","href","openAuthSessionAsync","pubKey","Buffer","from","toString","message","web3AuthResponse","privKey","trim","Promise","resolve","success","shareMetadata","encryptedData","encryptedMetadata","ciphertext","jsonData","hashData","data","signature","timeout","logout","remove","OPENLOGIN_NETWORK","MAINNET","TESTNET","CYAN","AQUA","CELESTE","SUPPORTED_KEY_CURVES","SECP256K1","ED25519","LOGIN_PROVIDER","GOOGLE","FACEBOOK","REDDIT","DISCORD","TWITCH","APPLE","LINE","GITHUB","KAKAO","LINKEDIN","TWITTER","WEIBO","WECHAT","EMAIL_PASSWORDLESS","SMS_PASSWORDLESS","JWT","MFA_LEVELS","DEFAULT","OPTIONAL","MANDATORY","NONE","default"],"sourceRoot":""}